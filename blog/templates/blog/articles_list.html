{% extends 'blog/base.html' %}
{% load staticfiles %}
{% load blog_templatetags %}
{% block body %}
    <div class="container">
    {% for article in articles %}
        <div class="row">
            <div class="col-md-11 col-md-offset-0">
                <h4><span class="glyphicon glyphicon-bookmark"></span>

                        {% if article.type == 1 %}
                            <strong class="text text-success text-lg">[ 原创 ]</strong>
                            <a href="{% url 'article_detail' article.id %}" class="btn">
                                <button class="btn btn-success">{{article.title}}</button> </a>
                        {% endif %}

                        {% if article.type == 2 %}
                            <strong class="text text-warning">[ 翻译 ]</strong>
                            <a href="{% url 'article_detail' article.id %}" class="btn">
                                <button class="btn btn-warning">{{article.title}} </button></a>
                        {% endif %}

                        {% if article.type == 3 %}
                            <strong class="text text-danger">[ 转载 ]</strong>
                            <a href="{% url 'article_detail' article.id %}" class="btn">
                                <button class="btn btn-danger">{{article.title}} </button></a>
                        {% endif %}

                </h4>
                <p>
                    <span class="glyphicon glyphicon-user"></span>
                    <button class="btn btn-primary">{{article.author}}</button>

                    <span class="glyphicon glyphicon-time"></span>
                    <button class="btn btn-primary">{{article.pulished_date|date:"Y-m-d" }}</button>

                    <span class="glyphicon glyphicon-tag"></span>
                    {% for tag in article.tags.all %}
                        <button class="btn btn-primary">{{ tag }}</button>
                    {% endfor %}
                </p>

                 <p class="bg-info" style="border-radius:10px; padding:15px;">
                         {{article.content |my_markdown|del_html_tag|truncatechars:600}}

                 </p>
            </div>
        </div>
    {% empty %}
        no articles
    {% endfor %}
        <div class="pagination row">
                <span class="step-links col-md-7">
                    {% if articles.has_previous %}
                        <a href="?page={{ articles.previous_page_number }}">
                            <button class="btn btn-primary">上一页</button>
                        </a>
                    {% endif %}

                    <span class="current">
                        第 {{ articles.number }} 页 / 共 {{ articles.paginator.num_pages }} 页
                    </span>

                    {% if articles.has_next %}
                        <a href="?page={{ articles.next_page_number }}">
                            <button class="btn btn-primary">下一页</button>
                        </a>
                    {% endif %}

                </span>
                <div class="col-md-5">
                    <form action="" method="get" class="form-inline" role="form">
                            <div class="form-group">

                                <input style="width:30%" class="form-control input-sm col-sm-1" type="text" name="page">&nbsp;页
                                <input class="btn btn-primary form-control" type="submit" value="跳转">&nbsp;
                            </div>

                    </form>
                </div>
            </div>
    </div>
{% endblock %}