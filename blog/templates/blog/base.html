<!DOCTYPE html>
{% load staticfiles %}
{% load blog_templatetags %}
{% load emoji_tags %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    <meta name='viewport' content='width=device-width; initial-scale=1.0;
         maximum-scale=1.0; user-scalable=0;' />
        <meta name='apple-mobile-web-app-capable' content='yes' />
    {% block title %}
    <title>Title</title>
    {% endblock %}
    {% block base_css %}
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
        <script src="{% static 'js/jquery.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.min.js' %}"></script>
        <!--emojione v2.1.1 使用bootstrap的cdn-->
        <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/emojione/2.1.1/assets/sprites/emojione.sprites.css">
        <script type="text/javascript" src="https://cdn.bootcss.com/emojione/2.1.1/lib/js/emojione.min.js"></script>

        <!--emojionearea-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/emojionearea.min.css' %}">
        <script type="text/javascript" src="{% static 'js/emojionearea.min.js' %}"></script>

        <!--code高亮显示-->
        <!--<link rel="stylesheet" href="{% static 'css/highlight/atom-one-dark.css' %}">-->
        <link rel="stylesheet" href="{% static 'css/highlight/zenburn.css' %}">

        <!--增加的icon图片-->
        <link rel="stylesheet" href="{% static 'css/glyphicons_extras.css' %}">

        <style>
            span{
                line-height:1.4;
            }
            pre {
                border-radius:10px;
            }
            pre code{
                border-radius:5px;
            }

            /* for block of numbers */
            td.hljs-ln-numbers {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;

                text-align: left;
                color: #ccc;
                border-right: 1px solid #CCC;
                vertical-align: top;
                /* your custom style here */
            }
            div.hljs-ln-line {
                padding-right:8px;
                padding-left:10px;
            }
            .show_hand{
                cursor: pointer;
            }
            .word-wrap{
                word-wrap: break-word;
            }
            .overflow{
                overflow: scroll;
            }
            .font-opacity{
               opacity: 0.5;
            }
            .font-opacity-3{
                opacity: 0.3;
            }
            .bigger:hover{
                width:106%;
            }
            .bg-blue:hover{
                background-color:#d9edff;
            }

            .font-40-size{
                font-size:40px;
            }
            .font-30-size{
                font-size:30px;
            }
            .font-20-size{
                font-size:20px;
            }
            .font-15-size{
                font-size:15px;
            }
            .font-25-size{
                font-size:25px;
            }
            .font-bold{
                color:black;
            }
            .hover-font{
                opacity: 0.7;
            }
            .hover-font:hover{
                opacity: 1;
            }
            .in-line{
                display: inline-block;
            }
            .hover-bigger:hover{
                text-decoration:none;
                transform:scale(1.2);
                -ms-transform:scale(1.2); 	/* IE 9 */
                -moz-transform:scale(1.2); 	/* Firefox */
                -webkit-transform:scale(1.2); /* Safari 和 Chrome */
                -o-transform:scale(1.2); 	/* Opera */
            }
            .border-1{
                border:1px solid;
            }
            .border-1-cc{
                border:1px solid #cccccc;
            }
            .border-radius-3{
                border-radius:3px;
            }
            .border-radius-5{
                border-radius:5px;
            }
            .border-radius-15{
                border-radius:15px;
            }
            .box-radius-2{
                border-radius:2px;
                padding:2px;
            }
            @media
            .box-redius-xs{
                border-radius:2px;
            }
            .box-redius-ms{
                border-radius:2px;
            }
            .box-radius-3{
                border:1px solid;
                border-radius:3px;
                padding-left:4px;
                padding-right:4px;
                padding-top:2px;
                padding-bottom:2px;
            }
            .box-radius-3:hover{
                border:1px solid #ee9f49;
                background-color:#ee9f49;
                border-radius:3px;
                color:white;
                padding-left:4px;
                padding-right:4px;
                padding-top:2px;
                padding-bottom:2px;
            }
            .box-radius-5-green{
                border:1px solid #5cb85c;
                border-radius:3px;
                color:#5cb85c;
                padding-left:4px;
                padding-right:8px;
                padding-top:4px;
                padding-bottom:8px;
            }
            .box-radius-5{
                border-radius:5px;
                padding:5px;
            }
            .bg-self-success{
                background-color:#397339;
                color:#ffffff;
            }
            .bg-self-warning{
                background-color:#8C6B39;
                color:#ffffff;
            }
            .bg-self-danger{
                background-color:#AD4242;
                color:#ffffff;
            }
            .box-radius-5-reversed{
                border-radius:5px;
                padding-top:3px;
                padding-bottom:3px;
                padding-left:5px;
                padding-right:5px;
            }
            .box-radius-5-gray{
                border-radius:5px;
                border:1px solid #cccccc;
            }
            .box-radius-8{
                border-radius:8px;
                padding:10px;
            }
            a.gray{
                color:#777777;
            }
            a.gray-5{
                color:#555555;
            }
            a.gray:hover{
                color:#333333;
            }
            a.black{
                color:#444444;
            }
            a.black:hover{
                color:#111111;
            }
            a.white{
                color:white;
            }
            a.yellow{
                color:yellow;
            }
            a.green{
                color:green;
            }
            a.red{
                color:red;
            }
            a:hover{
                color:#ee9f49;
                text-decoration:none;
            }
            .gold-color{
                color:#ee9f49;
            }
            .red{
                color:red;
            }
            @font-face {
                font-family: 'Light';
                src: url('{% static 'fonts/Light.ttf' %}');
                src: local('{% static 'fonts/Light.ttf' %}');
            }
            img{
                #border: green solid 1px;
                max-width:100%;
                /*display:block;   ... */
            }
            .div-inline{
                display:inline;
            }
            .bg-gray{
               background-color:#A0A0A0;
               color:#ffffff;
            }
            .bg-gray-55{
               background-color:#555555;
               color:#ffffff;
            }
            .bg-gray-f0{
                background-color:#f0f0f0;
            }
            .bg-gray-light{
               background-color:#17A2B8;
               color:#ffffff;
            }
            .bg-new{
                background-color:#17A2B8;
            }
            .bg-red{
                background-color:red;
                color:#ffffff;
            }
            .bg-green{
                background-color:#A0E75A;
                color:#ffffff;
            }
            .bg-chat-white{
                background-color:#FFFFFF;
            }
            .bg-chat-gray{
                background-color:#EBEBEB;
            }
            .bg-chat-gray-2{
                background-color:#D4D4D4;
                color:#ffffff;
            }
            .bg-chat-green{
                background-color:#A0E75A;
            }
            .box-shadow-entry{
                box-shadow: 2px 2px 2px #888888;
            }
            .box-shadow-entry:hover{
                box-shadow: 2px 2px 2px #888888 inset;
            }
            .box-shadow-sm{
                box-shadow: 2px 2px 1px #888888;
            }
            .box-shadow-md{
                box-shadow: 4px 4px 2px #888888;
            }
            .box-shadow-lg{
                box-shadow: 10px 10px 5px #888888;
            }
            .box-shadow-max{
                box-shadow: 20px 20px 10px #888888;
            }
            .text-shadow-sm{
                text-shadow: 2px 2px 1px #888888;
            }
            .text-shadow-lg{
                text-shadow: 4px 4px 2px #888888;
            }
            @media (min-width: 1500px) {
              .container {
                width: 1500px;
              }
            }
            .margin-top-2{
                margin-top:2px;
            }
            .margin-top-3{
                margin-top:3px;
            }
            .margin-top-5{
                margin-top:5px;
            }
            .margin-top-8{
                margin-top:8px;
            }
            .margin-top-20{
                margin-top:20px;
            }
            .margin-bottom-20{
                margin-bottom:20px;
            }
            .outer {
              width: 1px;
              height: 100%;
              margin: auto;
              position: relative;
              overflow: hidden;
            }
            .inner {
              position: absolute;
              width:100%;
              height: 40%;
              background: grey;
              top: 30%;
              box-shadow: 0px 0px 30px 20px grey;
            }
            .emojione{
                font-size: inherit;
                height: 2ex;
                width: 2.1ex;
                min-height: 20px;
                min-width: 20px;
                display: inline-block;
                margin: -.2ex .15em .2ex;
                line-height: normal;
                vertical-align: middle;
                max-width: 100%;
                top: 0;
            }


            .bg-tag-xs-green{
                    background-color:#5CB85C;
                    color:white;
                    border-radius:2px;
                    padding-left:4px;
                    padding-right:4px;
                    padding-top:2px;
                    padding-bottom:2px;
            }
            #custom css
            @media only screen and (max-width: 768px) {
                .box-radius-xs { border-radius:4px; }

                .font-xs{
                    font-size:12px;
                }

            }


            @media (min-width:768px){
                .box-radius-sm { border-radius:4px; }
                .bg-tag-sm-green{
                    background-color:#5CB85C;
                    color:white;
                    border-radius:8px;
                    padding-left:8px;
                    padding-right:8px;
                    padding-top:4px;
                    padding-bottom:6px;
                }
                .font-sm{
                    font-size:14px;
                }
            }
            @media (min-width: 992px){
                .box-radius-md { border-radius:6px; }
                #定义tag样式
                .bg-tag-md-green{
                    background-color:#5CB85C;
                    color:white;
                    border-radius:4px;
                    padding-left:6px;
                    padding-right:6px;
                    padding-top:4px;
                    padding-bottom:4px;
                }
            }
            @media (min-width: 1200px){
                .box-radius-lg { border-radius:8px; }
                #定义tag样式
                .bg-tag-lg-green{
                    background-color:#5CB85C;
                    color:white;
                    border-radius:4px;
                    padding-left:6px;
                    padding-right:6px;
                    padding-top:4px;
                    padding-bottom:4px;
                }
            }

            /*Margin and Padding helpers*/
            .p-l-0 { padding-left: 0; }
            .p-all{
                padding: .15em;
            }
            @media (max-width:767px){
            /*xs*/
            .p-xs { padding: .25em; }
            .p-x-xs { padding: 0 .25em; }
            .p-y-xs { padding: .25em 0 ; }
            .p-t-xs { padding-top: .25em; }
            .p-r-xs { padding-right: .25em; }
            .p-b-xs { padding-bottom: .25em; }
            .p-l-xs { padding-left: .25em; }
            .m-xs { margin: .25em; }
            .m-x-xs { margin: 0 .25em; }
            .m-y-xs { margin: .25em 0 ; }
            .m-r-xs { margin-right: .25em; }
            .m-l-xs { margin-left: .25em; }
            .m-t-xs { margin-top: .25em; }
            .m-b-xs { margin-bottom: .25em; }
            /*sm*/
            }
            @media (min-width:768px){
            /*sm*/
            .p-sm-small { padding: .3em; }
            .p-sm { padding: .5em; }
            .p-x-sm { padding: 0 .5em; }
            .p-y-sm { padding: .5em 0 ; }
            .p-t-sm { padding-top: .5em; }
            .p-r-sm { padding-right: .5em; }
            .p-b-sm { padding-bottom: .5em; }
            .p-l-sm { padding-left: .5em; }
            .m-sm { margin: .5em; }
            .m-x-sm { margin: 0 .5em; }
            .m-y-sm { margin: .5em 0 ; }
            .m-t-sm { margin-top: .5em; }
            .m-r-sm { margin-right: .5em; }
            .m-b-sm { margin-bottom: .5em; }
            .m-l-sm { margin-left: .5em; }
            }

            /*md*/
            @media (min-width: 992px){
            .p-md { padding: 1em; }
            .p-x-md { padding: 0 1em; }
            .p-y-md { padding: 1em 0; }
            .p-t-md { padding-top: 1em; }
            .p-r-md { padding-right: 1em; }
            .p-b-md { padding-bottom: 1em; }
            .p-l-md { padding-left: 1em; }
            .m-md { margin: 1em; }
            .m-x-md { margin: 0 1em; }
            .m-y-md { margin: 1em 0 ; }
            .m-t-md { margin-top: 1em; }
            .m-r-md { margin-right: 1em; }
            .m-b-md { margin-bottom: 1em; }
            .m-l-md { margin-left: 1em; }
            }

            /*lg*/
            @media (min-width: 1200px){
            .p-lg { padding: 1.5em; }
            .p-x-lg { padding: 0 1.5em; }
            .p-y-lg { padding: 1.5em 0; }
            .p-t-lg { padding-top: 1.5em; }
            .p-r-lg { padding-right: 1.5em; }
            .p-b-lg { padding-bottom: 1.5em; }
            .p-l-lg { padding-left: 1.5em; }
            .m-lg { margin: 1.5em; }
            .m-x-lg { margin: 0 1.5em; }
            .m-y-lg { margin: 1.5em 0; }
            .m-t-lg { margin-top: 1.5em; }
            .m-r-lg { margin-right: 1.5em; }
            .m-b-lg { margin-bottom: 1.5em; }
            .m-l-lg { margin-left: 1.5em; }
            }
            /*xl*/
            .p-xl { padding: 3em; }
            .p-x-xl { padding: 0 3em; }
            .p-y-xl { padding: 3em 0 ; }
            .p-t-xl { padding-top: 3em; }
            .p-r-xl { padding-right: 3em; }
            .p-b-xl { padding-bottom: 3em; }
            .p-l-xl { padding-left: 3em; }
            .m-xl { margin: 3em; }
            .m-x-xl { margin: 0 3em; }
            .m-y-xl { margin: 3em 0; }
            .m-t-xl { margin-top: 3em; }
            .m-r-xl { margin-right: 3em; }
            .m-b-xl { margin-bottom: 3em; }
            .m-l-xl { margin-left: 3em; }
        </style>
    {% endblock %}
    {% block script %}
        <script src="https://highlightjs.org/static/highlight.pack.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.3.0/highlightjs-line-numbers.min.js"></script>
        <!--<script>hljs.initHighlightingOnLoad();</script>-->
        <!--<script>hljs.initLineNumbersOnLoad();</script>-->
        <script>
            function html_encode(str)
              {
                  var s = "";
                  if (str.length == 0) return "";
                  s = str.replace(/&/g, ">");
                  s = s.replace(/</g, "<");
                  s = s.replace(/>/g, ">");
                  s = s.replace(/ /g, " ");
                  s = s.replace(/\'/g, "'");
                  s = s.replace(/\"/g, '"');
                  s = s.replace(/\n/g, "<br>");
                  return s;
              }
        </script>
    {% endblock %}
</head>
<body>
    {% block nav %}
        <nav class="navbar navbar-default" role="navigation">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="{% url 'blog:index' %}">
              <span class="glyphicon glyphicon-home"></span> 主页
              </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li><a href="{% url 'blog:articles_list' %}">
                    <span class="glyphicon glyphicon-list-alt"></span> <span>文章</span></a></li>

                  <li>
                  <form class="navbar-form" action="{% url 'blog:user_search' %}" method="get">
                    <div class="form-group">
                        <div class="input-group">
                            <input type="text" class="form-control" id="q" name="q" placeholder="搜索用户、文章" />
                            <span class="input-group-btn">
                                <button class="btn" type="submit"><span class="glyphicon glyphicon-search"></span></button>
                            </span>
                        </div>
                    </div>
                  </form>
                  </li>
              </ul>

              <ul class="nav navbar-nav navbar-right">
                {% if not user.is_authenticated %}
                  <li><a href="{% url 'blog:user_login' %}">
                      <span class="glyphicon glyphicon-log-in"></span>
                      登录</a></li>
                  <li><a href="{% url 'blog:user_register' %}">
                      <span class="glyphicon glyphicon-envelope"></span>
                      注册</a></li>
                {% else %}
                  <li class="text text-left"><a href="{% url 'blog:user_info' %}">
                      欢迎,<span class="gold-color">{% get_nickname user.id %}</span>!</a>
                  </li>


                  <li><a href="{% url 'blog:user_zone' user.id %}">
                      <span class="glyphicon glyphicon-leaf"></span> 我的博客
                      </a></li>
                  <li><a href="{% url 'blog:user_notifications' %}">
                    <span class="glyphicon glyphicon-bell"></span> 消息
                    <span class="badge" id="notifaction_counts" user_id="{{user.id}}">{% get_user_messages_count user %}</span></a></li>

                  <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <span class="glyphicon glyphicon-book"></span> 文章管理

                        <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="{% url 'blog:article_custom_categories_list' %}">
                                <span class="glyphicons glyphicons-list-alt">文章分类</span>
                                </a></li>
                            <li><a href="{% url 'blog:article_add' %}">
                                <span class="glyphicons glyphicons-pen">写文章</span>
                                </a></li>
                            <li><a href="{% url 'blog:article_update_list' %}">
                                <span class="glyphicons glyphicons-edit">编辑文章</span>
                                </a></li>
                            <li><a href="{% url 'blog:article_delete_list' %}">
                                <span class="glyphicons glyphicons-bin">删除文章</span>
                                </a></li>
                        </ul>
                  </li>
                  <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <span class="glyphicon glyphicon-user"></span> 帐号设置

                        <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="{% url 'blog:user_change_password' %}">
                                <span class="glyphicons glyphicons-keys">修改密码</span>
                                </a></li>
                            <li><a href="{% url 'blog:user_send_old_email' %}">
                                <span class="glyphicons glyphicons-envelope">修改邮箱</span>
                                </a></li>
                            <li><a href="{% url 'blog:user_info' %}">
                                <span class="glyphicons glyphicons-vcard">修改资料</span>
                                </a></li>
                        </ul>
                  </li>
                  {% if user.is_superuser %}
                      <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <span class="glyphicon glyphicon-cog"></span> 系统管理

                        <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="{% url 'blog:user_manage' %}">
                                <span class="glyphicons glyphicons-user"></span>
                                用户管理</a></li>
                            <li><a href="{% url 'blog:group_manage' %}">
                                <span class="glyphicons glyphicons-group"></span>
                                角色管理</a></li>
                            <li><a href="{% url 'blog:perm_manage' %}">
                                <span class="glyphicons glyphicons-lock"></span>
                                权限管理</a></li>
                        </ul>
                      </li>
                  {% endif %}
                  <li><a href="{% url 'blog:user_logout' %}">
                  <span class="glyphicon glyphicon-log-out"></span> 退出

                  </a></li>

                {% endif %}
              </ul>


            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
    {% endblock %}


    {% block body %}
    {% endblock %}
    <!--
    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    -->
    <!--
    <script type="text/javascript" charset="utf8" src="{% static 'js/kindeditor/kindeditor-all-min.js' %}"></script>
    <script type="text/javascript" charset="utf8" src="{% static 'js/kindeditor/lang/zh-CN.js' %} "></script>

     <script>
         var editor;
         KindEditor.ready(function(K){
             editor = K.create('textarea[name="content"]',{

             });
         });
     </script>
     -->
    <script>
        $(document).ready(function(){
            function getMessagesCount(){
                var user_id=$("#notifaction_counts").attr("user_id");
                var post_url = '/blog/user_messages_count/'+$("#notifaction_counts").attr("user_id");
                console.log(post_url);
                //获取form的method参数值
                var request_method = "get";
                //ajax请求
                $.ajax({
                    url : post_url,
                    type: request_method,
                }).done(function(response){
                    if(response == 'ERROR'){
                        window.location.replace('/blog/login/');
                    }
                    if( response > 0 ){
                        $("#notifaction_counts").text(response);
                    }else{
                        $("#notifaction_counts").text('');
                    }

                  });
            }
            setInterval(function(){getMessagesCount();}, 3000);
        });
    </script>
    {% block footer %}
    <br>


            <footer class="footer visible-md visible-lg">
                <div class="col-md-12 text text-center">
                    <span class="hover-font">Copyright © 2005-2018 SYS_BLOG.COM 版权所有 粤ICP证xxxxxx号</span>
                </div>
            </footer>

    {% endblock %}
</body>
</html>